

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Configuration service: anfisa.json &#8212; Anfisa Development&amp;Installation Documentation v.0.6 documentation</title>
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="app.storage - Dataset creation and upload" href="storage.html" />
    <link rel="prev" title="Administration file formats reference" href="a_adm_formats.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="storage.html" title="app.storage - Dataset creation and upload"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="a_adm_formats.html" title="Administration file formats reference"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Anfisa Development&amp;Installation Documentation v.0.6 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Anfisa Administration tools</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="a_adm_formats.html"
                        title="previous chapter">Administration file formats reference</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="storage.html"
                        title="next chapter">app.storage - Dataset creation and upload</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/adm/configuration.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="configuration-service-anfisa-json">
<h1>Configuration service: anfisa.json<a class="headerlink" href="#configuration-service-anfisa-json" title="Permalink to this headline">¶</a></h1>
<p>Configuration of the service is organized via the file <strong>anfisa.json</strong>
The file is formed in extended JSON format, extension mean:</p>
<blockquote>
<div><ul class="simple">
<li>full line comments starting with ‘//’ are allowed</li>
<li>macro definition mechanism supported</li>
</ul>
</div></blockquote>
<p>The following options are supported.</p>
<ul class="simple" id="index-0">
<li><strong>file-path-def</strong>, <em>dictionary</em></li>
</ul>
<p>The directory macro ${HOME} is predefined; here we define more macros,
in particular the macro ${WORK}:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;file-path-def&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;WORK&quot;</span><span class="p">:</span> <span class="s2">&quot;$</span><span class="si">{HOME}</span><span class="s2">/../a-setup&quot;</span><span class="p">},</span>
</pre></div>
</div>
<ul class="simple" id="index-1">
<li><strong>host</strong>, <em>string</em></li>
<li><strong>port</strong>, <em>int</em></li>
</ul>
<p>Host and port are used in the stand-alone configuration to setup the server on a
specific port, ignored in the server (UWIGI container) mode:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span>
<span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">8190</span><span class="p">,</span>
</pre></div>
</div>
<ul class="simple" id="index-2">
<li><strong>html-base</strong>, <em>string</em></li>
</ul>
<p>Used in the internal UI: its HTML pages need to know their location in terms of
URL addresses, just to make correct reference to REST API or other pages of
the internal UI, in case of server setup with NextGen UI should end in ‘/​app’:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;html-base&quot;</span><span class="p">:</span> <span class="s2">&quot;/anfisa/&quot;</span><span class="p">,</span>
</pre></div>
</div>
<ul class="simple" id="index-3">
<li><strong>html-ws-url</strong>, <em>string</em></li>
</ul>
<p>Address of the NextGen UI base page if the NextGen UI is set up, else keep the default value ​”ws”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;html-ws-url&quot;</span><span class="p">:</span> <span class="s2">&quot;ws&quot;</span><span class="p">,</span>
</pre></div>
</div>
<ul class="simple" id="index-4">
<li><strong>html-title</strong>, <em>string</em></li>
</ul>
<p>Title prefix used in the pages of the Legacy UI:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&quot;html-title&quot;: &quot;Anfisa&quot;,`
</pre></div>
</div>
<ul class="simple" id="index-5">
<li><strong>mongo-db</strong>, <em>string</em></li>
</ul>
<p>The database in MongoDB used by the system:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;mongo-db&quot;</span><span class="p">:</span> <span class="s2">&quot;Anfisa&quot;</span><span class="p">,</span>
</pre></div>
</div>
<ul class="simple" id="index-6">
<li><strong>data-vault</strong>, <em>string</em></li>
</ul>
<p>The location of the vault directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;data-vault&quot;</span><span class="p">:</span> <span class="s2">&quot;$</span><span class="si">{WORK}</span><span class="s2">/vault&quot;</span><span class="p">,</span>
</pre></div>
</div>
<ul id="index-7">
<li><p class="first"><strong>run-options</strong>, <em>list</em></p>
<blockquote>
<div><p>Some additional option to configure Anfisa service. Currently out of use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;run-options&quot;</span><span class="p">:</span> <span class="p">[]</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<span class="target" id="job-vault-check-period"></span><ul id="index-8">
<li><p class="first"><strong>job-vault-check-period</strong>, <em>int</em></p>
<blockquote>
<div><p>Period between checks of vault data consistence, in seconds:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;job-vault-check-period&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<ul class="simple" id="index-9">
<li><strong>http-bam-base</strong>, <em>string</em></li>
</ul>
<p>HTTP base directory for access to BAM-files, used in IGV-links. Uncomment this option
and set it up correctly if the server provides access to BAM-files, otherwise keep it
commented:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&quot;http-bam-base&quot;: “http://&lt;server&gt;/anfisa/links/&quot;`
</pre></div>
</div>
<span id="index-10"></span><ul id="export-cfg">
<li><p class="first"><strong>export</strong>, <em>dictionary</em></p>
<blockquote>
<div><p>Configuration of export functionality</p>
</div></blockquote>
</li>
</ul>
<ul id="index-11">
<li><p class="first"><strong>excel-template</strong>, <em>string</em></p>
<blockquote>
<div><p>The template used to configure the Excel export styles.
During evaluation of the script deploy.sh the file is being downloaded from URL:
“​https://www.dropbox.com/s/4dvunn3dusqc636/SEQaBOO_output_template_20190317.xlsx​”</p>
</div></blockquote>
</li>
</ul>
<ul id="index-12">
<li><p class="first"><strong>work-dir</strong>, <em>string</em></p>
<blockquote>
<div><p>The directory where the service stores exported files</p>
</div></blockquote>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&quot;export&quot;: {
    &quot;excel-template&quot;: &quot;${WORK}/export/SEQaBOO_output_template_20190317.xlsx&quot;,`
    &quot;work-dir&quot;: &quot;${WORK}/export/work&quot;
}
</pre></div>
</div>
<ul id="index-13">
<li><p class="first"><strong>dir-files</strong>, <em>list</em></p>
<p>Setup of the mechanism of forwarding files as request results:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;dir-files&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span><span class="s2">&quot;/ui/images&quot;</span><span class="p">,</span> <span class="s2">&quot;$</span><span class="si">{HOME}</span><span class="s2">/int_ui/images&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;/ui&quot;</span><span class="p">,</span> <span class="s2">&quot;$</span><span class="si">{HOME}</span><span class="s2">/int_ui/files&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;--/ui&quot;</span><span class="p">,</span> <span class="s2">&quot;$</span><span class="si">{WORK}</span><span class="s2">/ui&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;/excel&quot;</span><span class="p">,</span> <span class="s2">&quot;$</span><span class="si">{WORK}</span><span class="s2">/export/work&quot;</span><span class="p">]],</span>
</pre></div>
</div>
<p>Comments for instructions in example:</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">&quot;/ui/images&quot;,</span> <span class="pre">&quot;/ui&quot;</span></code>:</p>
<p>Requests for images and other sources, actual in stand-alone case.
Should transfer the content of files located in the specific directory in
$ANFISA_HOME; used in the internal UI in the stand-alone mode; in the
server mode the same task is solved by configuration of the “main
server”, Nginx or Apache</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">&quot;--/ui&quot;</span></code>:</p>
<p>Requests for the source files when the anti-cache mechanism is on; in the
server mode, to be used in the internal UI instead of the previous
instruction; (in server setup drop two leading ‘-’ to make it working, and
comment out the previous instruction)</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">&quot;excel&quot;</span></code>:</p>
<p>This line sets the directory used to place the content of exported Excel
files, supposing that they are going to be immediately downloaded by an
external client</p>
</li>
</ul>
</li>
</ul>
<span class="target" id="mirror-ui"></span><ul id="index-14">
<li><p class="first"><strong>mirror-ui</strong>, <em>list</em></p>
<blockquote>
<div><p>This instruction turns the <a class="reference internal" href="../glossary.html#term-anti-cache-mechanism"><span class="xref std std-term">anti-cache mechanism</span></a> on; it consists of the
paths to the source and target directories for mirroring (drop two leading
‘-’ to make it working):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;--mirror-ui&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;$</span><span class="si">{HOME}</span><span class="s2">/int_ui/files&quot;</span><span class="p">,</span> <span class="s2">&quot;$</span><span class="si">{WORK}</span><span class="s2">/ui&quot;</span><span class="p">],</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<ul id="index-15">
<li><p class="first"><strong>druid</strong>, <em>dictionary</em></p>
<blockquote>
<div><p>See the section about Druid in installation documentation</p>
</div></blockquote>
</li>
</ul>
<ul id="index-16">
<li><p class="first"><strong>logging</strong>, <em>dictionary</em></p>
<blockquote>
<div><p>Some standard Python way to configure the logging of a service. Please pay
attention to one specific line of this stuff:</p>
<p><strong>filename</strong> line contains the configuration of the path to the logging directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;logging&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="o">...</span>
    <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;$</span><span class="si">{WORK}</span><span class="s2">/logs/anfisa.log&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<span id="index-17"></span><ul id="docs-cfg">
<li><p class="first"><strong>doc-report-css</strong>, <em>string</em></p>
</li>
<li><p class="first"><strong>doc-pygments-css</strong>, <em>string</em></p>
<blockquote>
<div><p>These two options are used to configure styling of documentation pages for datasets:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;doc-report-css&quot;</span><span class="p">:</span> <span class="s2">&quot;$</span><span class="si">{HOME}</span><span class="s2">/int_ui/files/report.css&quot;</span><span class="p">,</span>
<span class="s2">&quot;doc-pygments-css&quot;</span><span class="p">:</span> <span class="s2">&quot;$</span><span class="si">{HOME}</span><span class="s2">/int_ui/files/py_pygments.css&quot;</span><span class="p">,</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="storage.html" title="app.storage - Dataset creation and upload"
             >next</a> |</li>
        <li class="right" >
          <a href="a_adm_formats.html" title="Administration file formats reference"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Anfisa Development&amp;Installation Documentation v.0.6 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Anfisa Administration tools</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright Copyright (c) 2019, 2020. Partners HealthCare and other members of Forome Association.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.4.
    </div>
  </body>
</html>